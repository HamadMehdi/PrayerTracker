@model PrayerTracker1.Models.Content

<div class="container-fluid mt-3">
    <div class="card shadow-lg w-100">
        <div class="card-header bg-primary text-white text-center py-3">
            <h3 class="mb-0">Add New Content</h3>
        </div>
        <div class="card-body p-4">

            @if (TempData["Success"] != null)
            {
                <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
                    @TempData["Success"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }

            @if (TempData["Error"] != null)
            {
                <div class="alert alert-danger alert-dismissible fade show text-center" role="alert">
                    @TempData["Error"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }

           
            @using (Html.BeginForm("Add", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", @class = "needs-validation", novalidate = "novalidate" }))
            {
                @Html.AntiForgeryToken()

                <!-- Title -->
                <div class="mb-4">
                    @Html.LabelFor(model => model.Title, "Title", new { @class = "form-label fw-bold mb-2" })
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-heading text-primary"></i></span>
                        @Html.TextBoxFor(model => model.Title, new { @class = "form-control", placeholder = "Enter content title", required = "required" })
                    </div>
                    <div class="invalid-feedback">
                        Please provide a title.
                    </div>
                </div>

               
                <div class="mb-4">
                    @Html.LabelFor(model => model.Category, "Category", new { @class = "form-label fw-bold mb-2" })
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-list-alt text-primary"></i></span>
                        @Html.TextBoxFor(model => model.Category, new { @class = "form-control", placeholder = "Enter content category", required = "required" })
                    </div>
                    <div class="invalid-feedback">
                        Please provide a category.
                    </div>
                </div>

                
                <div class="mb-4">
                    @Html.LabelFor(model => model.Description, "Description", new { @class = "form-label fw-bold mb-2" })
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-align-left text-primary"></i></span>
                        @Html.TextAreaFor(model => model.Description, new { @class = "form-control", rows = "4", placeholder = "Enter content description", required = "required" })
                    </div>
                    <div class="invalid-feedback">
                        Please provide a description.
                    </div>
                </div>


                <div class="mb-4">
                    @Html.LabelFor(model => model.ContentType, "Content Type", new { @class = "form-label fw-bold mb-2" })
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-file-alt text-primary"></i></span>
                        @Html.DropDownListFor(model => model.ContentType, new SelectList(new[] { "Text", "Video" }), "Select Type", new { @class = "form-select", id = "contentType", required = "required" })
                    </div>
                    <div class="invalid-feedback">
                        Please select a content type.
                    </div>
                </div>


                <div class="mb-4" id="fileUploadDiv" style="display: none;">
                    <label class="form-label fw-bold mb-2">Upload Video</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-upload text-primary"></i></span>
                        <input type="file" name="file" class="form-control" accept="video/*" id="fileInput" />
                    </div>
                    <div class="invalid-feedback" id="fileFeedback">
                        Please upload a video file.
                    </div>
                </div>


                <div class="d-grid gap-3 d-md-flex justify-content-md-end mt-4">
                    <button type="submit" class="btn btn-primary px-4 py-2">
                        <i class="fas fa-save me-2"></i> Save Content
                    </button>
                    <a href="@Url.Action("List", "Admin")" class="btn btn-secondary px-4 py-2">
                        <i class="fas fa-arrow-left me-2"></i> Back to List
                    </a>
                </div>
                @Html.HiddenFor(m => m.ID)
            }
        </div>
    </div>
    
</div>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const contentType = document.getElementById("contentType");
        const fileUploadDiv = document.getElementById("fileUploadDiv");
        const fileInput = document.getElementById("fileInput");
        const fileFeedback = document.getElementById("fileFeedback");
        contentType.addEventListener("change", function () {
            if (this.value === "Video") {
                fileUploadDiv.style.display = "block";
                fileInput.setAttribute("required", "required");
            } else {
                fileUploadDiv.style.display = "none";
                fileInput.removeAttribute("required");
            }
        });
        const form = document.querySelector(".needs-validation");
        form.addEventListener("submit", function (event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add("was-validated");
        }, false);
    });
</script>