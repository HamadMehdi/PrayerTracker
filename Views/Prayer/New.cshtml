@model PrayerTracker1.Models.Prayer

<div class="container-fluid mt-4">
    <div class="row justify-content-center">
        <div class="">

            <div class="card shadow-lg rounded w-100">
                <div class="card-header bg-primary text-white py-3">
                    <h3 class="mb-0"><i class="fas fa-praying-hands  me-2"></i> Add Qaza Prayer</h3>
                </div>
                <div class="card-body">
                    @using (Html.BeginForm("Save", "Prayer", FormMethod.Post, new { enctype = "multipart/form-data", @class = "needs-validation" }))
                    {
                        @Html.AntiForgeryToken()
                        <input type="hidden" id="existingPrayersData" value='@Html.Raw(ViewBag.ExistingPrayers)' />

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.Label("Prayer Date", new { @class = "form-label fw-bold mb-2" })
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="fas fa-calendar-alt text-primary"></i></span>
                                        @Html.TextBoxFor(m => m.PrayerDate, "{0:yyyy-MM-dd}", new { @id = "PrayerDate", @class = "form-control", @type = "date", @Value = DateTime.Now.Date.ToString("yyyy-MM-dd"), required = "required" })

                                    </div>
                                    <div class="invalid-feedback">Please select a prayer date.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.Label("Select Prayer", new { @class = "form-label fw-bold mb-2" })
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="fas fa-mosque text-primary"></i></span>
                                        @Html.DropDownListFor(
                                            model => model.PrayerName,
                                            new SelectList(new[]
                                            {
                                                new { Value = "Fajr", Text = "Fajr" },
                                                new { Value = "Dhuhr", Text = "Dhuhr" },
                                                new { Value = "Asr", Text = "Asr" },
                                                new { Value = "Maghrib", Text = "Maghrib" },
                                                new { Value = "Isha", Text = "Isha" }
                                            }, "Value", "Text"),
                                            "-- Select Prayer --",
                                            new { @id = "PrayerName", @class = "form-control", required = "required" }
                                        )

                                    </div>
                                    @Html.ValidationMessageFor(m => m.PrayerName, "", new { @class = "text-danger" })
                                    <div class="invalid-feedback">Please select a prayer.</div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">


                            <div class="col-md-6">
                                <div class="form-group">

                                    <div class="d-flex flex-column flex-md-row gap-3">
                                        <div class="form-check" hidden>
                                            <input type="hidden" name="IsQaza" value="true" class="form-check-input" id="IsQaza">
                                            <label for="IsQaza" class="form-check-label fw-bold">Mark as Qaza</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center mt-4">
                            <button type="submit" class="btn btn-success w-25 w-md-50 py-2">

                                <i class="fas fa-save me-2"></i> Save
                            </button>
                        </div>

                        @Html.HiddenFor(m => m.ID)

                    }
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (@Html.Raw(Json.Encode(TempData["ShowSuccessAlert"] ?? false))) {
            Swal.fire({
                title: 'Success!',
                text: 'Qaza Prayer saved successfully.',
                icon: 'success',
                confirmButtonText: 'OK'
            });
        }

    });
</script>

